-----
### 인스턴스 타입 변경
-----
1. 클라우드 컴퓨팅 장점을 최대한 이용하여 프로비전 이후에도 적절한 타입 / 사이즈로 변경 가능
2. 두 가지 변경
   - 사이즈 변경 : 같은 인스턴스 패밀리에서 사용량에 따라 크기 조절 (예) t3.micro → t3.medium)
   - 패밀리 변경 : 워크로드 성격에 따라 인스턴스 패밀리로 변경 (예) t3.micro → m5.large)
3. 호환성 체크 필요 : 가상화 타입(HVM, PV), 아키텍쳐(ARM, 32 bit), EBS 볼륨 개수 등
4. 💡 인스턴스 정지 필요
   - Spot 인스턴스는 변경 불가능
   - HealthCheck 불가능 : Auto-Scale에 영향

5. 참고사항
   - 인스턴스 아이디는 유지
   - Private IP는 유지하지만 Public IP는 변경 (Elastic IP의 경우 고정)

6. 인스턴스 스토어와 EBS 사용 인스턴스에 따라 과정이 달라짐 : 인스턴스 스토어의 경우 영구적 스토리지로 백업 필요
7. 인스턴스 스토어 (백업) / EBS 사용 EC2 인스턴스 중지 (호환되지 않는 경우) → EBS 분리
   - EBS 분리 → 신규 인스턴스 생성 → 기존 EBS Attach
   - EBS 분리 → 스냅샷 → AMI → 신규 인스턴스 생성
   - EBS 인스턴스 중지 (호환되는 경우) → 인스턴스 타입 변경

8. Demo - 인스턴스 타입 변경
   - 인스턴스 타입 변경
     + 사이즈 변경
     + 패밀리 변경
     + m7g 사용 : 비용 발생 가능
   - 인스턴스 이름 : demo-my-ec2
     + 키 페어 필요 없음
     + 일반 보안 그룹 : default
     + 스토리지 볼륨 - EBS Volume - 종료 시 삭제 (예 [기본값])
   - EC2 인스턴스 중지
     + EC2 사이즈 변경 : 작업 - 인스턴스 설정 - 인스턴스 유형 변경 - 새 인스턴스 유형에서 선택 (t2.medium) - 변경
     + 작업 - 인스턴스 설정 - 인스턴스 유형 변경 - m7g.medium (아키텍쳐 변경) - 변경 불가 (아키텍쳐가 다르기 때문임)
       * 변경 방법 : EC2 선택 - 스토리지 - 선택 후 선택된 볼륨 확인 - 스냅샷 생성 - demo-my-ebs (EC2 인스턴스는 중지, EBS는 사용 중)
       * AMI 이미지 생성 : 스냅샷 - 작업 - 이미지 생성 (MyDemoImage) - 아키텍쳐 (arm64 [m7g.medium]) - 이미지 생성
       * AMI로 인스턴스 생성 : demo-my-new ec2 - 인스턴스 유형 - m7g.medium - 네트워크 보안 그룹 : default
     + 다른 방법 : 원하는 인스턴스 유형을 올리고, 기존 인스턴스 EBS 방법을 Attach
       * t2.medium 스토리지 - 종료 시 삭제 (예로 설정되어 있음) - 비 활성화 방법이 없음
       * CloudShell에서 명령어 입력 : ```aws ec2 modify-instance-attribute --instance-id {인스턴스_아이디} --block-device-mappings "[{\"DeviceName\":\"/dev/xvda\",\"Ebs\":{\"DeleteOnTermination\":false}}]"``` (인스턴스 볼륨의 디바이스 이름(/dev/xvda)와 일치해야 함) - 종료 시 삭제가 아니오로 변경됨
       * EC2 t2.medium은 종료하면 종료되지만, Volume으로 들어가면 그대로 존재 - EC2 m7g.medium 인스턴스 선택 후 작업 - 볼륨 연결 - 인스턴스 목록이 보이거나 보이지 않을 수 있음 (EBS Volume은 가용 영역 단위이므로, 같은 가용 영역을 맞춰야 함)
       * 다르다면, 같은 가용 영역에 맞춰지도록 EC2 m7g.medium 인스턴스 생성 후, 볼륨 연결의 인스턴스 선택 및 디바이스 연결

   - EC2 인스턴스, AMI, 스냅샷 삭제 및 종료 후 삭제가 아니오 된 볼륨 삭제
